<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>弹性小球</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{overflow:hidden;background:#1a1a2e}
#ball{
    width:60px;
    height:60px;
    background:radial-gradient(circle at 30% 30%,#ffdf40,#ff8800);
    border-radius:50%;
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    box-shadow:0 0 25px rgba(255,160,0,0.6);
    will-change:transform, left, top;
    touch-action:none;
}
/* 右下角署名 */
#credit{
    position:fixed;
    right:12px;
    bottom:8px;
    color:rgba(255,255,255,0.4);
    font-size:14px;
    font-family:Arial, sans-serif;
    pointer-events:none;
}
</style>
</head>
<body>
<div id="ball"></div>
<div id="credit">@CKl2012</div>

<script>
const ball = document.getElementById('ball');

let w = window.innerWidth, h = window.innerHeight;
let x = w/2, y = h/2;
let vx = 0, vy = 0;
let isDrag = false;
let targetX = x, targetY = y;

const friction = 0.92;
const bounce = -0.85;
const gravity = 0.15;
const radius = 30;
const followSpeed = 0.15;

function resize(){
    w = window.innerWidth;
    h = window.innerHeight;
}
window.addEventListener('resize',resize);

function update(){
    if(isDrag){
        x += (targetX - x) * followSpeed;
        y += (targetY - y) * followSpeed;
    }else{
        vy += gravity;
        vx *= friction;
        vy *= friction;
        x += vx;
        y += vy;
    }

    let scaleX=1, scaleY=1;

    if(x-radius<0){x=radius; vx*=bounce; scaleX=0.7; scaleY=1.2;}
    if(x+radius>w){x=w-radius; vx*=bounce; scaleX=0.7; scaleY=1.2;}
    if(y-radius<0){y=radius; vy*=bounce; scaleX=1.2; scaleY=0.7;}
    if(y+radius>h){y=h-radius; vy*=bounce; scaleX=1.2; scaleY=0.7;}

    ball.style.left = x + 'px';
    ball.style.top = y + 'px';
    ball.style.transform = `translate(-50%,-50%) scale(${scaleX},${scaleY})`;

    requestAnimationFrame(update);
}

function start(e){
    isDrag = true;
    const t = e.touches ? e.touches[0] : e;
    targetX = t.clientX;
    targetY = t.clientY;
}

function move(e){
    if(!isDrag) return;
    const t = e.touches ? e.touches[0] : e;
    targetX = t.clientX;
    targetY = t.clientY;
}

function end(){
    isDrag = false;
    vx = (targetX - x) * 0.3;
    vy = (targetY - y) * 0.3;
}

window.addEventListener('mousedown', start);
window.addEventListener('mousemove', move);
window.addEventListener('mouseup', end);
window.addEventListener('mouseleave', end);

window.addEventListener('touchstart', start, {passive:false});
window.addEventListener('touchmove', move, {passive:false});
window.addEventListener('touchend', end);
window.addEventListener('touchcancel', end);

resize();
update();
</script>
</body>
</html>